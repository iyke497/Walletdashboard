{% extends "base.html" %}

{% block title %}Register{% endblock %} {# Set the page title #}

{% block content %}
<div class="container mx-auto px-4 py-8"> {# Optional: Add a container for centering and padding using Tailwind classes #}
    <h2 class="text-2xl font-bold mb-6 text-center">Register Account</h2> {# Form title #}

    {# Display flash messages (e.g., success messages after registration) #}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="list-none p-0 mb-4">
            {% for category, message in messages %}
                {# Basic styling for flash messages - you might want more specific classes #}
                {# Example classes: 'alert-success', 'alert-danger', 'alert-info' #}
                <li class="{{ category }} p-3 mb-2 rounded text-white
                           {% if category == 'success' %}bg-green-500{% endif %}
                           {% if category == 'danger' %}bg-red-500{% endif %}
                           {% if category == 'info' %}bg-blue-500{% endif %}
                           {% if category == 'warning' %}bg-yellow-500{% endif %}
                           ">
                    {{ message }}
                </li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    {# The HTML form element. action should point to your registration route. #}
    {# method="post" is crucial for sending form data #}
    <form method="POST" action="{{ url_for('auth.register') }}" class="max-w-sm mx-auto bg-white p-6 rounded shadow-md">
        {# Include the CSRF token - required for security with Flask-WTF #}
        {{ form.csrf_token }}

        {# Email Field #}
        <div class="mb-4">
            {# Label for the email field #}
            {{ form.email.label(class="block text-gray-700 text-sm font-bold mb-2") }}
            {# Email input field. Add classes for styling. #}
            {{ form.email(class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline", placeholder="Enter your email") }}
            {# Display validation errors for the email field #}
            {% for error in form.email.errors %}
                <p class="text-red-500 text-xs italic">{{ error }}</p>
            {% endfor %}
        </div>

        {# Password Field #}
        <div class="mb-4">
            {# Label for the password field #}
            {{ form.password.label(class="block text-gray-700 text-sm font-bold mb-2") }}
            {# Password input field. Add classes for styling. #}
            {{ form.password(class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline", placeholder="Enter your password") }}
            {# Display validation errors for the password field #}
            {% for error in form.password.errors %}
                <p class="text-red-500 text-xs italic">{{ error }}</p>
            {% endfor %}
        </div>

        {# Repeat Password Field #}
        <div class="mb-6">
            {# Label for the repeat password field #}
            {{ form.password2.label(class="block text-gray-700 text-sm font-bold mb-2") }}
            {# Repeat password input field. Add classes for styling. #}
            {{ form.password2(class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline", placeholder="Repeat your password") }}
            {# Display validation errors for the repeat password field #}
            {% for error in form.password2.errors %}
                <p class="text-red-500 text-xs italic">{{ error }}</p>
            {% endfor %}
        </div>

        {# Submit Button #}
        <div class="flex items-center justify-between">
            {# Submit button. Add classes for styling. #}
            {{ form.submit(class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline") }}
        </div>
    </form>
</div>
{% endblock %}
